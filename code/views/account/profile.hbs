{{#section 'css'}}
<link rel="stylesheet" href="/css/style.css">
<style>
  .modal {
    display: none;
    /* Hidden by default */
    position: fixed;
    /* Stay in place */
    z-index: 1;
    /* Sit on top */
    padding-top: 100px;
    /* Location of the box */
    left: 0;
    top: 0;
    width: 100%;
    /* Full width */
    height: 100%;
    /* Full height */
    overflow: auto;
    /* Enable scroll if needed */
    background-color: rgb(0, 0, 0);
    /* Fallback color */
    background-color: rgba(0, 0, 0, 0.4);
    /* Black w/ opacity */
  }

  /* Modal Content */
  .modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
  }

  /* The Close Button */
  .close {
    color: #aaaaaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }

  .close:hover,
  .close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
  }

  .myBtn {
    background-color: #4CAF50;
    border: none;
    color: red;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
  }
</style>
{{/section}}
{{#section 'js'}}
<script>
  $('#Image').fileinput({
    theme: 'fa',
    dropZoneEnabled: false,
    allowedFileExtensions: ['png', 'jpg', 'gif'],
  });

  function validateForm() {
    var name = document.getElementById('namename').value;
    var mail = document.getElementById('email').value;
    var sdt = document.getElementById('phone').value;
    var pass = document.getElementById('pass').value;

    alert(name);
    if (name.length === 0 || mail.length === 0 || sdt.length === 0 || pass.length === 0 || cfp.length === 0) {
      alert("Lack of information!");
      return false;
    }
    var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
    if (mailmatch(mailformat) === false) {
      alert("Incorect email!!!");
      return false;
    }
    return true;
  }
</script>
{{/section}}
<main>
  <div class="profile">
    <div class="container profile-header-background text-center">
      <div class="avatar margin view overlay">
        <div class="mask flex-center rgba-red-strong">
          <script>

          </script>
          {{#if this.userInfo}}

          <img src="/user/{{authUser.ID}}/image{{this.userInfo}}.png" alt="User Avatar">

          {{else}}
          <img src="/img/blank-profile-picture-973460_640.png" alt="User Avatar">
          {{/if}}

          <button id="myBtn"><i class="fa fa-camera" aria-hidden="true"></i></button>
          <div id="myModal" class="modal">

            <!-- Modal content -->
            <div class="modal-content">
              <span style="float: right" class="close">&times;</span>
              <form id="uploadForm" action="/account/profile/image" method="post" novalidate
                enctype="multipart/form-data">
                <input type="file" id="Image" name="Image" />
                <input type="submit" value="Upload File" name="submit">

              </form>
            </div>

          </div>
        </div>
      </div>
      <h4 id="name" style="color:#fff; font-size: 2vw;">{{authUser.username}}</h4>
      <h5 id="username" style="color:#fff;font-size: 1.2vw;">@{{authUser.username}}</h3>
        <div class="row justify-content-md-center margin">
          <div class="col-md-3 .col-md-offset-3" id="follower" style="color:#fff;">Follower 1.5K</div>
          <div class="col-md-3" id="following" style="color:#fff;">Following 16.5M</div>
        </div>
        <button class="btn btn-primary btn-lg" type="button">Follow</button>
        <div class="d-flex justify-content-end">
          <a href="#"><i class="fa fa-camera" aria-hidden="true"></i></a>
        </div>
    </div>


    <div class="profile-activity">
      <div class="container text-center">
        <!-- Nav pills -->
        <div class="row">
          <div class=".col-md-6 .col-md-offset-3 bg-white rounded-top tab-head">
            <ul class="nav nav-pills nav-tabs-pill">
              <li class="nav-item-pill">
                <a class="nav-link active" data-toggle="pill" href="#activities">My Song</a>
              </li>
              <li class="nav-item-pill">
                <a class="nav-link" data-toggle="pill" href="#follower-list">Follower</a>
              </li>
              <li class="nav-item-pill">
                <a class="nav-link" data-toggle="pill" href="#following-list">Following</a>
              </li>
              <li class="nav-item-pill">
                <a class="nav-link" data-toggle="pill" href="#edit-profile">Edit Profile</a>
              </li>
            </ul>
          </div>
        </div>

        <!-- Tab panes -->
        <div class="tab-content">

          <div class="tab-pane container active" id="activities">
            {{#each this.u}}
            <div style="padding:10px 10px 0px 0px" class="article border">
              <div class="article-head d-flex flex-row">
                <div class="user-info m-2">
                  <a class="user-avatar">
                    <img src="/img/blank-profile-picture-973460_640.png" alt="user-avatar" class="rounded-circle left">
                  </a>
                </div>
                <div class="username-list m-2 mr-auto d-flex align-items-start flex-column">

                  <a href="#" class="username" title="User">{{authUser.username}}</a>

                  <div class="user-info-more">
                    <span class="date-post"><small>31/01/2020</small></span>
                    <span class="time-post"><small>12:54:57</small></span>
                  </div>
                </div>
                <div class="user-option dropdown show m-2">
                  <a title="Option" id="dropdownMenuLink" href="#" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false">
                    <img src="/img/more.png" alt="More Option">
                  </a>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <a class="dropdown-item" href="#"> <img src="/img/delete.png" alt="Delete"> Delete</a>
                    <a class="dropdown-item" href="#"><img src="/img/security.png" alt="Edit Privacy"> Edit
                      Privacy</a>
                  </div>
                </div>
              </div>
              <div class="article-body d-flex align-items-start flex-column">


                <div class="d-flex flex-column bd-highlight mb-3">


                  <div class="d-flex justify-content-center">
                    <iframe width="1000" height="400" src="https://www.youtube.com/embed/{{id_bai_hat}}"></iframe>
                  </div>




                  <span class="linksong-tiltle" style="font-weight: 300; color: #F66DCD;padding: 30px 30px 0px 0px">
                    <audio controls src="/user/{{id_nguoi_hat}}/{{id_bai_hat}}.mp3"></audio>
                  </span>


                </div>
              </div>
              <div class="article-foot">
                <div class="article-status d-flex">
                  <a title="Like" class="likepost p-2 mr-auto" href="#">
                    <img src="/img/heart.png" alt="icon-like">
                    <span class="total-like" title="Lượt yêu thích">100</span>
                  </a>

                  <a title="Comment" class="commentpost p-2 " href="#">
                    <span class="total-comment" title="Bình luận">100 Comments</span>
                  </a>
                </div>
                <div class="article-footer d-flex ">
                  <button type="button" href="#" class="p-2 m-2 flex-fill">
                    <img src="/img/like.png" alt="icon-like">
                    <span>Like</span>
                  </button>
                  <button type="button" href="#" class="p-2 m-2 flex-fill">
                    <img src="/img/comment.png" alt="icon-comment">
                    <span>Comment</span>
                  </button>
                  <button type="button" href="#" class="p-2 m-2 flex-fill">
                    <img src="/img/share.png" alt="icon-share">
                    <span>Share</span>
                  </button>
                </div>
              </div>

            </div>
            {{/each}}
          </div>


          <div class="tab-pane container fade" id="follower-list">
            <div class="container">
              <ul class="list-group list-group-flush">
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/eEo8asG.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span class="font-weight-bold">Soffie
                          Morne</span><span class="followers">12550 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-outline-primary btn-sm"
                        type="button">Follow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/KmT515u.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span class="font-weight-bold">Bella
                          Thorne</span><span class="followers">1450 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-outline-primary btn-sm"
                        type="button">Follow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/I6WnkOv.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span
                          class="font-weight-bold">Scarlet</span><span class="followers">18570 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-primary btn-sm"
                        type="button">Following</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/eEo8asG.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span class="font-weight-bold">Soffie
                          Morne</span><span class="followers">12550 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-outline-primary btn-sm"
                        type="button">Follow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/KmT515u.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span class="font-weight-bold">Bella
                          Thorne</span><span class="followers">1450 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-outline-primary btn-sm"
                        type="button">Follow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/I6WnkOv.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span
                          class="font-weight-bold">Scarlet</span><span class="followers">18570 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-primary btn-sm"
                        type="button">Following</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/eEo8asG.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span class="font-weight-bold">Soffie
                          Morne</span><span class="followers">12550 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-outline-primary btn-sm"
                        type="button">Follow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/KmT515u.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span class="font-weight-bold">Bella
                          Thorne</span><span class="followers">1450 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-outline-primary btn-sm"
                        type="button">Follow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/I6WnkOv.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span
                          class="font-weight-bold">Scarlet</span><span class="followers">18570 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-primary btn-sm"
                        type="button">Following</button></div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
          <div class="tab-pane container fade" id="following-list">
            <div class="container">
              <ul class="list-group list-group-flush">
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/eEo8asG.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span class="font-weight-bold">Soffie
                          Morne</span><span class="followers">12550 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-outline-primary btn-sm"
                        type="button">Follow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/KmT515u.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span class="font-weight-bold">Bella
                          Thorne</span><span class="followers">1450 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-primary btn-sm"
                        type="button">Unfollow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/I6WnkOv.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span
                          class="font-weight-bold">Scarlet</span><span class="followers">18570 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-primary btn-sm"
                        type="button">Unfollow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/eEo8asG.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span class="font-weight-bold">Soffie
                          Morne</span><span class="followers">12550 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-primary btn-sm"
                        type="button">Unfollow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/KmT515u.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span class="font-weight-bold">Bella
                          Thorne</span><span class="followers">1450 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-primary btn-sm"
                        type="button">Unfollow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/I6WnkOv.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span
                          class="font-weight-bold">Scarlet</span><span class="followers">18570 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-primary btn-sm"
                        type="button">Unfollow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/eEo8asG.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span class="font-weight-bold">Soffie
                          Morne</span><span class="followers">12550 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-primary btn-sm"
                        type="button">Unfollow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/KmT515u.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span class="font-weight-bold">Bella
                          Thorne</span><span class="followers">1450 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-primary btn-sm"
                        type="button">Unfollow</button></div>
                  </div>
                </li>
                <li class="list-group-item">
                  <div class="d-flex flex-row justify-content-between align-items-center mt-2">
                    <div class="d-flex flex-row align-items-center"><img class="rounded-circle"
                        src="https://i.imgur.com/I6WnkOv.jpg" width="55">
                      <div class="d-flex flex-column align-items-start ml-2"><span
                          class="font-weight-bold">Scarlet</span><span class="followers">18570 Followers</span></div>
                    </div>
                    <div class="d-flex flex-row align-items-center mt-2"><button class="btn btn-primary btn-sm"
                        type="button">Unfollow</button></div>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <div class="tab-pane container fade" id="edit-profile">
            <div class="container">
              <div class="card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-12">
                      <h4>Your Profile</h4>
                      <hr>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12">

                      {{#if err_message}}
                      <div class="alert alert-warning alert-dismissible fade show" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                        {{err_message}}
                      </div>
                      {{/if}}

                      <form method="POST" onsubmit="return validateForm()" action="/account/profile">
                        <div class="form-group row">
                          <label for="namename" class="col-4 col-form-label">Username</label>
                          <div class="col-8">
                            <input id="namename" name="namename" class="form-control here" type="text">
                          </div>
                        </div>
                        <div class="form-group row">
                          <label for="email" class="col-4 col-form-label">Email</label>
                          <div class="col-8">
                            <input id="email" name="email" placeholder="Email" class="form-control here" type="text">
                          </div>
                        </div>
                        <div class="form-group row">
                          <label for="phone" class="col-4 col-form-label">Phone Number*</label>
                          <div class="col-8">
                            <input id="phone" name="phone" placeholder="Phone" class="form-control here">
                          </div>
                        </div>
                        <div class="form-group row">
                          <label for="newpass" class="col-4 col-form-label">New Password</label>
                          <div class="col-8">
                            <input id="pass" name="pass" placeholder="New Password" class="form-control here"
                              type="password">
                          </div>
                        </div>
                     
                        <div class="form-group row">
                          <div class="offset-4 col-8">
                            <button name="submit" type="submit" class="btn btn-primary">Update My Profile</button>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>

                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

{{#section 'script'}}
<script>
  // Get the modal
  var modal = document.getElementById("myModal");

  // Get the button that opens the modal
  var btn = document.getElementById("myBtn");

  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];

  // When the user clicks the button, open the modal 
  btn.onclick = function () {
    modal.style.display = "block";
  }

  // When the user clicks on <span> (x), close the modal
  span.onclick = function () {
    modal.style.display = "none";
  }

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function (event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }
</script>
{{/section}}